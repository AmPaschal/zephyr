# Defines the root of the project.
# Be aware of how many directories deep you go!
ROOT = /Users/parth/zephyr-paschal

# Defines file(s) to link to harness, MUST be a full path!
# (We recommend $(ROOT)/os/... for defining these paths)
# Each file is space seperated, and multiple can be defined
LINK = \
	$(ROOT)/zephyr/subsys/bluetooth/audio/tbs.c \

# Harness to utilize, omit the extension!
H_ENTRY = main

# Extra CBMC flags to be passed during CBMC analysis
# Added additional unwinding to increase coverage at different locations
H_CBMCFLAGS = --nondet-static --unwind 1 --unwindset strlen.0:101 --unwindset __builtin___strcpy_chk.0:101 


#  --unwindset bt_tbs_valid_uri.0:101 \
# 	--unwindset lookup_call_in_inst.0:2 --unwindset next_free_call_index.0:2 --unwindset lookup_call.0:2 \
# 	--unwindset  call_alloc.0:2 --unwindset  net_buf_put_call_states_by_inst.0:2 \
# 	--unwindset net_buf_put_current_calls_by_inst.0:2 --unwindset net_buf_put_call_states.0:2 \
# 	--unwindset net_buf_put_current_calls.0:2 --unwindset strcpy_stub.0:101

# Extra header defintiions to be passed during compilation
H_DEF = \
	-DCONFIG_BT_TBS_BEARER_COUNT=1 \
	-DCONFIG_BT_TBS_MAX_URI_LENGTH=51 \
	-DCONFIG_BT_TBS_MAX_PROVIDER_NAME_LENGTH=512 \
	-DCONFIG_BT_TBS_MAX_SCHEME_LIST_LENGTH=512 \
	-DCONFIG_BT_TBS_MAX_SERVICE_NAME_LENGTH=512 \
	-DCONFIG_BT_TBS_MAX_SCHEME_LIST_LENGTH=512 \
	-DCONFIG_BT_TBS_MAX_CALLS=1 \
	-DCONFIG_BT_TBS_UCI=1 \
	-DCONFIG_BT_TBS_SUPPORTED_FEATURES=1 \
	-DCONFIG_BT_TBS_TECHNOLOGY=1 \
	-DCONFIG_BT_TBS_SIGNAL_STRENGTH_INTERVAL=0\
	-DCONFIG_BT_TBS_STATUS_FLAGS=1 \
	-DCONFIG_BT_TBS_PROVIDER_NAME=1 \
	-DCONFIG_BT_TBS_URI_SCHEMES_LIST=1 \
	-DCONFIG_BT_GTBS=1 \

# Extra CBMC includes to be passed during compilation

H_INC = \
	-I$(ROOT)/zephyr/include \
	-I$(ROOT)/zephyr/subsys/bluetooth/audio \
	-I$(ROOT)/zephyr/include/zephyr/bluetooth/audio \

# Include our special build file
include ../Makefile.include
