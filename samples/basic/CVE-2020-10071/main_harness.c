#include <mqtt_decoder.c>

void harness()
{

	uint8_t flags;
	uint32_t var_length;

	struct buf_ctx buf_struct;
	struct mqtt_publish_param param_struct;
	struct buf_ctx *buf = &buf_struct;
	struct mqtt_publish_param *param = &param_struct;

	buf = (struct buf_ctx *)malloc(sizeof(struct buf_ctx));
	__CPROVER_assume(buf != NULL);

	param = (struct mqtt_publish_param *)malloc(sizeof(struct mqtt_publish_param));
	__CPROVER_assume(param != NULL);

	struct mqtt_publish_message *message;
	message = (struct mqtt_publish_message *)malloc(sizeof(struct mqtt_publish_message));
	__CPROVER_assume(message != NULL);
	param->message = *message;

	uint16_t message_id;
	param->message_id = message_id;

	uint8_t dup_flag;
	param->dup_flag = dup_flag;

	uint8_t retain_flag;
	param->retain_flag = retain_flag;

	int ret = publish_decode(flags, var_length, buf, param);
}

int main(void)
{

	harness();
	return 0;
}
