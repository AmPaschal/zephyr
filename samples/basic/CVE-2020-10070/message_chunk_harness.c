#include <mqtt_decoder.c>
#include <mqtt_rx.c>
#include <mqtt.c>

void harness()
{

	struct mqtt_client client;
	uint64_t rx_buf_size;
	mqtt_evt_cb_t evt_cb;
	client.evt_cb = &evt_cb;
	client.rx_buf = malloc(sizeof(uint8_t));
	__CPROVER_assume(client.rx_buf != NULL);
	client.rx_buf_size = rx_buf_size;

	uint8_t type_and_flags;
	uint32_t length;
	struct buf_ctx buf;

	uint8_t size;
	uint8_t *buf_start = malloc(size);
	__CPROVER_assume(buf_start != NULL);
	buf.cur = buf_start;
	buf.end = size == 0 ? buf_start : buf_start + size - 1;

	mqtt_read_message_chunk(&client, &buf, length);
}

int main(void)
{

	harness();
	return 0;
}
