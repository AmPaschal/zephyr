
<html>
<head>
<title>zephyr/subsys/net/lib/mqtt/mqtt_internal.h</title>
<link rel="stylesheet" type="text/css" href="../../../../../viewer.css">
</head>

<body>
<div class="code">
<div id="1" class="line none">    1 /*</div><div id="2" class="line none">    2  * Copyright (c) 2018 Nordic Semiconductor ASA</div><div id="3" class="line none">    3  *</div><div id="4" class="line none">    4  * SPDX-License-Identifier: Apache-2.0</div><div id="5" class="line none">    5  */</div><div id="6" class="line none">    6 </div><div id="7" class="line none">    7 /** @file mqtt_internal.h</div><div id="8" class="line none">    8  *</div><div id="9" class="line none">    9  * @brief Function and data structures internal to MQTT module.</div><div id="10" class="line none">   10  */</div><div id="11" class="line none">   11 </div><div id="12" class="line none">   12 #ifndef <a href="mqtt_internal.h.html#13">MQTT_INTERNAL_H_</a></div><div id="13" class="line none">   13 #define <a href="mqtt_internal.h.html#13">MQTT_INTERNAL_H_</a></div><div id="14" class="line none">   14 </div><div id="15" class="line none">   15 #include &lt;stdint.h&gt;</div><div id="16" class="line none">   16 #include &lt;string.h&gt;</div><div id="17" class="line none">   17 </div><div id="18" class="line none">   18 #include &lt;zephyr/net/mqtt.h&gt;</div><div id="19" class="line none">   19 </div><div id="20" class="line none">   20 #ifdef __cplusplus</div><div id="21" class="line none">   21 extern "C" {</div><div id="22" class="line none">   22 #endif</div><div id="23" class="line none">   23 </div><div id="24" class="line none">   24 /**@brief Keep alive time for MQTT (in seconds). Sending of Ping Requests to</div><div id="25" class="line none">   25  *        keep the connection alive are governed by this value.</div><div id="26" class="line none">   26  */</div><div id="27" class="line none">   27 #define <a href="mqtt_internal.h.html#27">MQTT_KEEPALIVE</a> CONFIG_MQTT_KEEPALIVE</div><div id="28" class="line none">   28 </div><div id="29" class="line none">   29 /**@brief Clean session on every connect (1) or keep subscriptions and messages</div><div id="30" class="line none">   30  *        between connects (0)</div><div id="31" class="line none">   31  */</div><div id="32" class="line none">   32 #define <a href="mqtt_internal.h.html#32">MQTT_CLEAN_SESSION</a> (IS_ENABLED(CONFIG_MQTT_CLEAN_SESSION) ? 1U : 0U)</div><div id="33" class="line none">   33 </div><div id="34" class="line none">   34 /**@brief Minimum mandatory size of fixed header. */</div><div id="35" class="line none">   35 #define <a href="mqtt_internal.h.html#35">MQTT_FIXED_HEADER_MIN_SIZE</a> 2</div><div id="36" class="line none">   36 </div><div id="37" class="line none">   37 /**@brief Maximum size of the fixed header. Remaining length size is 4 in this</div><div id="38" class="line none">   38  *        case.</div><div id="39" class="line none">   39  */</div><div id="40" class="line none">   40 #define <a href="mqtt_internal.h.html#40">MQTT_FIXED_HEADER_MAX_SIZE</a> 5</div><div id="41" class="line none">   41 </div><div id="42" class="line none">   42 /**@brief MQTT Control Packet Types. */</div><div id="43" class="line none">   43 #define <a href="mqtt_internal.h.html#43">MQTT_PKT_TYPE_CONNECT</a>     0x10</div><div id="44" class="line none">   44 #define <a href="mqtt_internal.h.html#44">MQTT_PKT_TYPE_CONNACK</a>     0x20</div><div id="45" class="line none">   45 #define <a href="mqtt_internal.h.html#45">MQTT_PKT_TYPE_PUBLISH</a>     0x30</div><div id="46" class="line none">   46 #define <a href="mqtt_internal.h.html#46">MQTT_PKT_TYPE_PUBACK</a>      0x40</div><div id="47" class="line none">   47 #define <a href="mqtt_internal.h.html#47">MQTT_PKT_TYPE_PUBREC</a>      0x50</div><div id="48" class="line none">   48 #define <a href="mqtt_internal.h.html#48">MQTT_PKT_TYPE_PUBREL</a>      0x60</div><div id="49" class="line none">   49 #define <a href="mqtt_internal.h.html#49">MQTT_PKT_TYPE_PUBCOMP</a>     0x70</div><div id="50" class="line none">   50 #define <a href="mqtt_internal.h.html#50">MQTT_PKT_TYPE_SUBSCRIBE</a>   0x80</div><div id="51" class="line none">   51 #define <a href="mqtt_internal.h.html#51">MQTT_PKT_TYPE_SUBACK</a>      0x90</div><div id="52" class="line none">   52 #define <a href="mqtt_internal.h.html#52">MQTT_PKT_TYPE_UNSUBSCRIBE</a> 0xA0</div><div id="53" class="line none">   53 #define <a href="mqtt_internal.h.html#53">MQTT_PKT_TYPE_UNSUBACK</a>    0xB0</div><div id="54" class="line none">   54 #define <a href="mqtt_internal.h.html#54">MQTT_PKT_TYPE_PINGREQ</a>     0xC0</div><div id="55" class="line none">   55 #define <a href="mqtt_internal.h.html#55">MQTT_PKT_TYPE_PINGRSP</a>     0xD0</div><div id="56" class="line none">   56 #define <a href="mqtt_internal.h.html#56">MQTT_PKT_TYPE_DISCONNECT</a>  0xE0</div><div id="57" class="line none">   57 </div><div id="58" class="line none">   58 /**@brief Masks for MQTT header flags. */</div><div id="59" class="line none">   59 #define <a href="mqtt_internal.h.html#59">MQTT_HEADER_DUP_MASK</a>     0x08</div><div id="60" class="line none">   60 #define <a href="mqtt_internal.h.html#60">MQTT_HEADER_QOS_MASK</a>     0x06</div><div id="61" class="line none">   61 #define <a href="mqtt_internal.h.html#61">MQTT_HEADER_RETAIN_MASK</a>  0x01</div><div id="62" class="line none">   62 </div><div id="63" class="line none">   63 /**@brief Masks for MQTT header flags. */</div><div id="64" class="line none">   64 #define <a href="mqtt_internal.h.html#64">MQTT_CONNECT_FLAG_CLEAN_SESSION</a>   0x02</div><div id="65" class="line none">   65 #define <a href="mqtt_internal.h.html#65">MQTT_CONNECT_FLAG_WILL_TOPIC</a>      0x04</div><div id="66" class="line none">   66 #define <a href="mqtt_internal.h.html#66">MQTT_CONNECT_FLAG_WILL_RETAIN</a>     0x20</div><div id="67" class="line none">   67 #define <a href="mqtt_internal.h.html#67">MQTT_CONNECT_FLAG_PASSWORD</a>        0x40</div><div id="68" class="line none">   68 #define <a href="mqtt_internal.h.html#68">MQTT_CONNECT_FLAG_USERNAME</a>        0x80</div><div id="69" class="line none">   69 </div><div id="70" class="line none">   70 #define <a href="mqtt_internal.h.html#70">MQTT_CONNACK_FLAG_SESSION_PRESENT</a> 0x01</div><div id="71" class="line none">   71 </div><div id="72" class="line none">   72 /**@brief Maximum payload size of MQTT packet. */</div><div id="73" class="line none">   73 #define <a href="mqtt_internal.h.html#73">MQTT_MAX_PAYLOAD_SIZE</a> 0x0FFFFFFF</div><div id="74" class="line none">   74 </div><div id="75" class="line none">   75 /**@brief Computes total size needed to pack a UTF8 string. */</div><div id="76" class="line none">   76 #define <a href="mqtt_internal.h.html#76">GET_UT8STR_BUFFER_SIZE</a>(STR) (sizeof(uint16_t) + (STR)-&gt;<a href="../../../../include/zephyr/kernel.h.html#4716">size</a>)</div><div id="77" class="line none">   77 </div><div id="78" class="line none">   78 /**@brief Computes total size needed to pack a binary stream. */</div><div id="79" class="line none">   79 #define <a href="mqtt_internal.h.html#79">GET_BINSTR_BUFFER_SIZE</a>(STR) ((STR)-&gt;<a href="../../../../include/zephyr/net/mqtt.h.html#172">len</a>)</div><div id="80" class="line none">   80 </div><div id="81" class="line none">   81 /**@brief Sets MQTT Client's state with one indicated in 'STATE'. */</div><div id="82" class="line none">   82 #define <a href="mqtt_internal.h.html#82">MQTT_SET_STATE</a>(CLIENT, STATE) ((CLIENT)-&gt;<a href="../../../../include/zephyr/net/mqtt.h.html#496">internal</a>.<a href="../../../../include/zephyr/kernel.h.html#5726">state</a> |= (STATE))</div><div id="83" class="line none">   83 </div><div id="84" class="line none">   84 /**@brief Sets MQTT Client's state exclusive to 'STATE'. */</div><div id="85" class="line none">   85 #define <a href="mqtt_internal.h.html#85">MQTT_SET_STATE_EXCLUSIVE</a>(CLIENT, STATE) \</div><div id="86" class="line none">   86                                         ((CLIENT)-&gt;<a href="../../../../include/zephyr/net/mqtt.h.html#496">internal</a>.<a href="../../../../include/zephyr/kernel.h.html#5726">state</a> = (STATE))</div><div id="87" class="line none">   87 </div><div id="88" class="line none">   88 /**@brief Verifies if MQTT Client's state is set with one indicated in 'STATE'.</div><div id="89" class="line none">   89  */</div><div id="90" class="line none">   90 #define <a href="mqtt_internal.h.html#90">MQTT_HAS_STATE</a>(CLIENT, STATE) ((CLIENT)-&gt;<a href="../../../../include/zephyr/net/mqtt.h.html#496">internal</a>.<a href="../../../../include/zephyr/kernel.h.html#5726">state</a> &amp; (STATE))</div><div id="91" class="line none">   91 </div><div id="92" class="line none">   92 /**@brief Reset 'STATE' in MQTT Client's state. */</div><div id="93" class="line none">   93 #define <a href="mqtt_internal.h.html#93">MQTT_RESET_STATE</a>(CLIENT, STATE) ((CLIENT)-&gt;<a href="../../../../include/zephyr/net/mqtt.h.html#496">internal</a>.<a href="../../../../include/zephyr/kernel.h.html#5726">state</a> &amp;= ~(STATE))</div><div id="94" class="line none">   94 </div><div id="95" class="line none">   95 /**@brief Initialize MQTT Client's state. */</div><div id="96" class="line none">   96 #define <a href="mqtt_internal.h.html#96">MQTT_STATE_INIT</a>(CLIENT) ((CLIENT)-&gt;<a href="../../../../include/zephyr/net/mqtt.h.html#496">internal</a>.<a href="../../../../include/zephyr/kernel.h.html#5726">state</a> = <a href="mqtt_internal.h.html#137">MQTT_STATE_IDLE</a>)</div><div id="97" class="line none">   97 </div><div id="98" class="line none">   98 /**@brief Computes the first byte of MQTT message header based on message type,</div><div id="99" class="line none">   99  *        duplication flag, QoS and  the retain flag.</div><div id="100" class="line none">  100  */</div><div id="101" class="line none">  101 #define <a href="mqtt_internal.h.html#101">MQTT_MESSAGES_OPTIONS</a>(TYPE, DUP, QOS, RETAIN) \</div><div id="102" class="line none">  102         (((TYPE)      &amp; 0xF0)  | \</div><div id="103" class="line none">  103          (((DUP) &lt;&lt; 3) &amp; 0x08) | \</div><div id="104" class="line none">  104          (((QOS) &lt;&lt; 1) &amp; 0x06) | \</div><div id="105" class="line none">  105          ((RETAIN) &amp; 0x01))</div><div id="106" class="line none">  106 </div><div id="107" class="line none">  107 #define <a href="mqtt_internal.h.html#107">MQTT_MAX_LENGTH_BYTES</a> 4</div><div id="108" class="line none">  108 #define <a href="mqtt_internal.h.html#108">MQTT_LENGTH_VALUE_MASK</a> 0x7F</div><div id="109" class="line none">  109 #define <a href="mqtt_internal.h.html#109">MQTT_LENGTH_CONTINUATION_BIT</a> 0x80</div><div id="110" class="line none">  110 #define <a href="mqtt_internal.h.html#110">MQTT_LENGTH_SHIFT</a> 7</div><div id="111" class="line none">  111 </div><div id="112" class="line none">  112 /**@brief Check if the input pointer is NULL, if so it returns -EINVAL. */</div><div id="113" class="line none">  113 #define <a href="mqtt_internal.h.html#113">NULL_PARAM_CHECK</a>(<a href="../../../../include/zephyr/net/mqtt.h.html#322">param</a>) \</div><div id="114" class="line none">  114         do { \</div><div id="115" class="line none">  115                 if ((<a href="../../../../include/zephyr/net/mqtt.h.html#322">param</a>) == NULL) { \</div><div id="116" class="line none">  116                         return -EINVAL; \</div><div id="117" class="line none">  117                 } \</div><div id="118" class="line none">  118         } while (false)</div><div id="119" class="line none">  119 </div><div id="120" class="line none">  120 #define <a href="mqtt_internal.h.html#120">NULL_PARAM_CHECK_VOID</a>(<a href="../../../../include/zephyr/net/mqtt.h.html#322">param</a>) \</div><div id="121" class="line none">  121         do { \</div><div id="122" class="line none">  122                 if ((<a href="../../../../include/zephyr/net/mqtt.h.html#322">param</a>) == NULL) { \</div><div id="123" class="line none">  123                         return; \</div><div id="124" class="line none">  124                 } \</div><div id="125" class="line none">  125         } while (false)</div><div id="126" class="line none">  126 </div><div id="127" class="line none">  127 /** Buffer context to iterate over buffer. */</div><div id="128" class="line none">  128 struct <a href="mqtt_internal.h.html#128">buf_ctx</a> {</div><div id="129" class="line none">  129         uint8_t *<a href="mqtt_internal.h.html#129">cur</a>;</div><div id="130" class="line none">  130         uint8_t *<a href="mqtt_internal.h.html#130">end</a>;</div><div id="131" class="line none">  131 };</div><div id="132" class="line none">  132 </div><div id="133" class="line none">  133 /**@brief MQTT States. */</div><div id="134" class="line none">  134 enum <a href="mqtt_internal.h.html#134">mqtt_state</a> {</div><div id="135" class="line none">  135         /** Idle state, implying the client entry in the table is unused/free.</div><div id="136" class="line none">  136          */</div><div id="137" class="line none">  137         <a href="mqtt_internal.h.html#137">MQTT_STATE_IDLE</a>                 = 0x00000000,</div><div id="138" class="line none">  138 </div><div id="139" class="line none">  139         /** TCP Connection has been requested, awaiting result of the request.</div><div id="140" class="line none">  140          */</div><div id="141" class="line none">  141         <a href="mqtt_internal.h.html#141">MQTT_STATE_TCP_CONNECTING</a>       = 0x00000001,</div><div id="142" class="line none">  142 </div><div id="143" class="line none">  143         /** TCP Connection successfully established. */</div><div id="144" class="line none">  144         <a href="mqtt_internal.h.html#144">MQTT_STATE_TCP_CONNECTED</a>        = 0x00000002,</div><div id="145" class="line none">  145 </div><div id="146" class="line none">  146         /** MQTT Connection successful. */</div><div id="147" class="line none">  147         <a href="mqtt_internal.h.html#147">MQTT_STATE_CONNECTED</a>            = 0x00000004,</div><div id="148" class="line none">  148 };</div><div id="149" class="line none">  149 </div><div id="150" class="line none">  150 /**@brief Notify application about MQTT event.</div><div id="151" class="line none">  151  *</div><div id="152" class="line none">  152  * @param[in] client Identifies the client for which event occurred.</div><div id="153" class="line none">  153  * @param[in] evt MQTT event.</div><div id="154" class="line none">  154  */</div><div id="155" class="line none">  155 void event_notify(struct <a href="../../../../include/zephyr/net/mqtt.h.html#330">mqtt_client</a> *client, const struct <a href="../../../../include/zephyr/net/mqtt.h.html#317">mqtt_evt</a> *evt);</div><div id="156" class="line none">  156 </div><div id="157" class="line none">  157 /**@brief Handles MQTT messages received from the peer.</div><div id="158" class="line none">  158  *</div><div id="159" class="line none">  159  * @param[in] client Identifies the client for which the data was received.</div><div id="160" class="line none">  160 </div><div id="161" class="line none">  161  * @return 0 if the procedure is successful, an error code otherwise.</div><div id="162" class="line none">  162  */</div><div id="163" class="line none">  163 int mqtt_handle_rx(struct <a href="../../../../include/zephyr/net/mqtt.h.html#330">mqtt_client</a> *client);</div><div id="164" class="line none">  164 </div><div id="165" class="line none">  165 /**@brief Constructs/encodes Connect packet.</div><div id="166" class="line none">  166  *</div><div id="167" class="line none">  167  * @param[in] client Identifies the client for which the procedure is requested.</div><div id="168" class="line none">  168  *                   All information required for creating the packet like</div><div id="169" class="line none">  169  *                   client id, clean session flag, retain session flag etc are</div><div id="170" class="line none">  170  *                   assumed to be populated for the client instance when this</div><div id="171" class="line none">  171  *                   procedure is requested.</div><div id="172" class="line none">  172  * @param[inout] buf_ctx Pointer to the buffer context structure,</div><div id="173" class="line none">  173  *                       containing buffer for the encoded message.</div><div id="174" class="line none">  174  *                       As output points to the beginning and end of</div><div id="175" class="line none">  175  *                       the frame.</div><div id="176" class="line none">  176  *</div><div id="177" class="line none">  177  * @return 0 if the procedure is successful, an error code otherwise.</div><div id="178" class="line none">  178  */</div><div id="179" class="line none">  179 int connect_request_encode(const struct <a href="../../../../include/zephyr/net/mqtt.h.html#330">mqtt_client</a> *client,</div><div id="180" class="line none">  180                            struct <a href="mqtt_internal.h.html#128">buf_ctx</a> *<a href="../../../../include/zephyr/logging/log_msg.h.html#118">buf</a>);</div><div id="181" class="line none">  181 </div><div id="182" class="line none">  182 /**@brief Constructs/encodes Publish packet.</div><div id="183" class="line none">  183  *</div><div id="184" class="line none">  184  * @param[in] param Publish message parameters.</div><div id="185" class="line none">  185  * @param[inout] buf_ctx Pointer to the buffer context structure,</div><div id="186" class="line none">  186  *                       containing buffer for the encoded message.</div><div id="187" class="line none">  187  *                       As output points to the beginning and end of</div><div id="188" class="line none">  188  *                       the frame.</div><div id="189" class="line none">  189  *</div><div id="190" class="line none">  190  * @return 0 if the procedure is successful, an error code otherwise.</div><div id="191" class="line none">  191  */</div><div id="192" class="line none">  192 int publish_encode(const struct <a href="../../../../include/zephyr/net/mqtt.h.html#249">mqtt_publish_param</a> *<a href="../../../../include/zephyr/net/mqtt.h.html#322">param</a>, struct <a href="mqtt_internal.h.html#128">buf_ctx</a> *<a href="../../../../include/zephyr/logging/log_msg.h.html#118">buf</a>);</div><div id="193" class="line none">  193 </div><div id="194" class="line none">  194 /**@brief Constructs/encodes Publish Ack packet.</div><div id="195" class="line none">  195  *</div><div id="196" class="line none">  196  * @param[in] param Publish Ack message parameters.</div><div id="197" class="line none">  197  * @param[inout] buf_ctx Pointer to the buffer context structure,</div><div id="198" class="line none">  198  *                       containing buffer for the encoded message.</div><div id="199" class="line none">  199  *                       As output points to the beginning and end of</div><div id="200" class="line none">  200  *                       the frame.</div><div id="201" class="line none">  201  *</div><div id="202" class="line none">  202  * @return 0 if the procedure is successful, an error code otherwise.</div><div id="203" class="line none">  203  */</div><div id="204" class="line none">  204 int publish_ack_encode(const struct <a href="../../../../include/zephyr/net/mqtt.h.html#209">mqtt_puback_param</a> *<a href="../../../../include/zephyr/net/mqtt.h.html#322">param</a>,</div><div id="205" class="line none">  205                        struct <a href="mqtt_internal.h.html#128">buf_ctx</a> *<a href="../../../../include/zephyr/logging/log_msg.h.html#118">buf</a>);</div><div id="206" class="line none">  206 </div><div id="207" class="line none">  207 /**@brief Constructs/encodes Publish Receive packet.</div><div id="208" class="line none">  208  *</div><div id="209" class="line none">  209  * @param[in] param Publish Receive message parameters.</div><div id="210" class="line none">  210  * @param[inout] buf_ctx Pointer to the buffer context structure,</div><div id="211" class="line none">  211  *                       containing buffer for the encoded message.</div><div id="212" class="line none">  212  *                       As output points to the beginning and end of</div><div id="213" class="line none">  213  *                       the frame.</div><div id="214" class="line none">  214  *</div><div id="215" class="line none">  215  * @return 0 if the procedure is successful, an error code otherwise.</div><div id="216" class="line none">  216  */</div><div id="217" class="line none">  217 int publish_receive_encode(const struct <a href="../../../../include/zephyr/net/mqtt.h.html#215">mqtt_pubrec_param</a> *<a href="../../../../include/zephyr/net/mqtt.h.html#322">param</a>,</div><div id="218" class="line none">  218                            struct <a href="mqtt_internal.h.html#128">buf_ctx</a> *<a href="../../../../include/zephyr/logging/log_msg.h.html#118">buf</a>);</div><div id="219" class="line none">  219 </div><div id="220" class="line none">  220 /**@brief Constructs/encodes Publish Release packet.</div><div id="221" class="line none">  221  *</div><div id="222" class="line none">  222  * @param[in] param Publish Release message parameters.</div><div id="223" class="line none">  223  * @param[inout] buf_ctx Pointer to the buffer context structure,</div><div id="224" class="line none">  224  *                       containing buffer for the encoded message.</div><div id="225" class="line none">  225  *                       As output points to the beginning and end of</div><div id="226" class="line none">  226  *                       the frame.</div><div id="227" class="line none">  227  *</div><div id="228" class="line none">  228  * @return 0 if the procedure is successful, an error code otherwise.</div><div id="229" class="line none">  229  */</div><div id="230" class="line none">  230 int publish_release_encode(const struct <a href="../../../../include/zephyr/net/mqtt.h.html#221">mqtt_pubrel_param</a> *<a href="../../../../include/zephyr/net/mqtt.h.html#322">param</a>,</div><div id="231" class="line none">  231                            struct <a href="mqtt_internal.h.html#128">buf_ctx</a> *<a href="../../../../include/zephyr/logging/log_msg.h.html#118">buf</a>);</div><div id="232" class="line none">  232 </div><div id="233" class="line none">  233 /**@brief Constructs/encodes Publish Complete packet.</div><div id="234" class="line none">  234  *</div><div id="235" class="line none">  235  * @param[in] param Publish Complete message parameters.</div><div id="236" class="line none">  236  * @param[inout] buf_ctx Pointer to the buffer context structure,</div><div id="237" class="line none">  237  *                       containing buffer for the encoded message.</div><div id="238" class="line none">  238  *                       As output points to the beginning and end of</div><div id="239" class="line none">  239  *                       the frame.</div><div id="240" class="line none">  240  *</div><div id="241" class="line none">  241  * @return 0 if the procedure is successful, an error code otherwise.</div><div id="242" class="line none">  242  */</div><div id="243" class="line none">  243 int publish_complete_encode(const struct <a href="../../../../include/zephyr/net/mqtt.h.html#227">mqtt_pubcomp_param</a> *<a href="../../../../include/zephyr/net/mqtt.h.html#322">param</a>,</div><div id="244" class="line none">  244                             struct <a href="mqtt_internal.h.html#128">buf_ctx</a> *<a href="../../../../include/zephyr/logging/log_msg.h.html#118">buf</a>);</div><div id="245" class="line none">  245 </div><div id="246" class="line none">  246 /**@brief Constructs/encodes Disconnect packet.</div><div id="247" class="line none">  247  *</div><div id="248" class="line none">  248  * @param[inout] buf_ctx Pointer to the buffer context structure,</div><div id="249" class="line none">  249  *                       containing buffer for the encoded message.</div><div id="250" class="line none">  250  *                       As output points to the beginning and end of</div><div id="251" class="line none">  251  *                       the frame.</div><div id="252" class="line none">  252  *</div><div id="253" class="line none">  253  * @return 0 if the procedure is successful, an error code otherwise.</div><div id="254" class="line none">  254  */</div><div id="255" class="line none">  255 int disconnect_encode(struct <a href="mqtt_internal.h.html#128">buf_ctx</a> *<a href="../../../../include/zephyr/logging/log_msg.h.html#118">buf</a>);</div><div id="256" class="line none">  256 </div><div id="257" class="line none">  257 /**@brief Constructs/encodes Subscribe packet.</div><div id="258" class="line none">  258  *</div><div id="259" class="line none">  259  * @param[in] param Subscribe message parameters.</div><div id="260" class="line none">  260  * @param[inout] buf_ctx Pointer to the buffer context structure,</div><div id="261" class="line none">  261  *                       containing buffer for the encoded message.</div><div id="262" class="line none">  262  *                       As output points to the beginning and end of</div><div id="263" class="line none">  263  *                       the frame.</div><div id="264" class="line none">  264  *</div><div id="265" class="line none">  265  * @return 0 if the procedure is successful, an error code otherwise.</div><div id="266" class="line none">  266  */</div><div id="267" class="line none">  267 int subscribe_encode(const struct <a href="../../../../include/zephyr/net/mqtt.h.html#270">mqtt_subscription_list</a> *<a href="../../../../include/zephyr/net/mqtt.h.html#322">param</a>,</div><div id="268" class="line none">  268                      struct <a href="mqtt_internal.h.html#128">buf_ctx</a> *<a href="../../../../include/zephyr/logging/log_msg.h.html#118">buf</a>);</div><div id="269" class="line none">  269 </div><div id="270" class="line none">  270 /**@brief Constructs/encodes Unsubscribe packet.</div><div id="271" class="line none">  271  *</div><div id="272" class="line none">  272  * @param[in] param Unsubscribe message parameters.</div><div id="273" class="line none">  273  * @param[inout] buf_ctx Pointer to the buffer context structure,</div><div id="274" class="line none">  274  *                       containing buffer for the encoded message.</div><div id="275" class="line none">  275  *                       As output points to the beginning and end of</div><div id="276" class="line none">  276  *                       the frame.</div><div id="277" class="line none">  277  *</div><div id="278" class="line none">  278  * @return 0 if the procedure is successful, an error code otherwise.</div><div id="279" class="line none">  279  */</div><div id="280" class="line none">  280 int unsubscribe_encode(const struct <a href="../../../../include/zephyr/net/mqtt.h.html#270">mqtt_subscription_list</a> *<a href="../../../../include/zephyr/net/mqtt.h.html#322">param</a>,</div><div id="281" class="line none">  281                        struct <a href="mqtt_internal.h.html#128">buf_ctx</a> *<a href="../../../../include/zephyr/logging/log_msg.h.html#118">buf</a>);</div><div id="282" class="line none">  282 </div><div id="283" class="line none">  283 /**@brief Constructs/encodes Ping Request packet.</div><div id="284" class="line none">  284  *</div><div id="285" class="line none">  285  * @param[inout] buf_ctx Pointer to the buffer context structure,</div><div id="286" class="line none">  286  *                       containing buffer for the encoded message.</div><div id="287" class="line none">  287  *                       As output points to the beginning and end of</div><div id="288" class="line none">  288  *                       the frame.</div><div id="289" class="line none">  289  *</div><div id="290" class="line none">  290  * @return 0 if the procedure is successful, an error code otherwise.</div><div id="291" class="line none">  291  */</div><div id="292" class="line none">  292 int ping_request_encode(struct <a href="mqtt_internal.h.html#128">buf_ctx</a> *<a href="../../../../include/zephyr/logging/log_msg.h.html#118">buf</a>);</div><div id="293" class="line none">  293 </div><div id="294" class="line none">  294 /**@brief Decode MQTT Packet Type and Length in the MQTT fixed header.</div><div id="295" class="line none">  295  *</div><div id="296" class="line none">  296  * @param[inout] buf A pointer to the buf_ctx structure containing current</div><div id="297" class="line none">  297  *                   buffer position.</div><div id="298" class="line none">  298  * @param[out] type_and_flags Message type and flags.</div><div id="299" class="line none">  299  * @param[out] length Length of variable header and payload in the MQTT message.</div><div id="300" class="line none">  300  *</div><div id="301" class="line none">  301  * @return 0 if the procedure is successful, an error code otherwise.</div><div id="302" class="line none">  302  */</div><div id="303" class="line none">  303 int <a href="mqtt_decoder.c.html#191">fixed_header_decode</a>(struct <a href="mqtt_internal.h.html#128">buf_ctx</a> *<a href="../../../../include/zephyr/logging/log_msg.h.html#118">buf</a>, uint8_t *type_and_flags,</div><div id="304" class="line none">  304                         uint32_t *length);</div><div id="305" class="line none">  305 </div><div id="306" class="line none">  306 /**@brief Decode MQTT Connect Ack packet.</div><div id="307" class="line none">  307  *</div><div id="308" class="line none">  308  * @param[in] client MQTT client for which packet is decoded.</div><div id="309" class="line none">  309  * @param[inout] buf A pointer to the buf_ctx structure containing current</div><div id="310" class="line none">  310  *                   buffer position.</div><div id="311" class="line none">  311  * @param[out] param Pointer to buffer for decoded Connect Ack parameters.</div><div id="312" class="line none">  312  *</div><div id="313" class="line none">  313  * @return 0 if the procedure is successful, an error code otherwise.</div><div id="314" class="line none">  314  */</div><div id="315" class="line none">  315 int <a href="mqtt_decoder.c.html#204">connect_ack_decode</a>(const struct <a href="../../../../include/zephyr/net/mqtt.h.html#330">mqtt_client</a> *client, struct <a href="mqtt_internal.h.html#128">buf_ctx</a> *<a href="../../../../include/zephyr/logging/log_msg.h.html#118">buf</a>,</div><div id="316" class="line none">  316                        struct <a href="../../../../include/zephyr/net/mqtt.h.html#195">mqtt_connack_param</a> *<a href="../../../../include/zephyr/net/mqtt.h.html#322">param</a>);</div><div id="317" class="line none">  317 </div><div id="318" class="line none">  318 /**@brief Decode MQTT Publish packet.</div><div id="319" class="line none">  319  *</div><div id="320" class="line none">  320  * @param[in] flags Byte containing message type and flags.</div><div id="321" class="line none">  321  * @param[in] var_length Length of the variable part of the message.</div><div id="322" class="line none">  322  * @param[inout] buf A pointer to the buf_ctx structure containing current</div><div id="323" class="line none">  323  *                   buffer position.</div><div id="324" class="line none">  324  * @param[out] param Pointer to buffer for decoded Publish parameters.</div><div id="325" class="line none">  325  *</div><div id="326" class="line none">  326  * @return 0 if the procedure is successful, an error code otherwise.</div><div id="327" class="line none">  327  */</div><div id="328" class="line none">  328 int <a href="mqtt_decoder.c.html#233">publish_decode</a>(uint8_t <a href="../../../../include/zephyr/kernel.h.html#2764">flags</a>, uint32_t var_length, struct <a href="mqtt_internal.h.html#128">buf_ctx</a> *<a href="../../../../include/zephyr/logging/log_msg.h.html#118">buf</a>,</div><div id="329" class="line none">  329                    struct <a href="../../../../include/zephyr/net/mqtt.h.html#249">mqtt_publish_param</a> *<a href="../../../../include/zephyr/net/mqtt.h.html#322">param</a>);</div><div id="330" class="line none">  330 </div><div id="331" class="line none">  331 /**@brief Decode MQTT Publish Ack packet.</div><div id="332" class="line none">  332  *</div><div id="333" class="line none">  333  * @param[inout] buf A pointer to the buf_ctx structure containing current</div><div id="334" class="line none">  334  *                   buffer position.</div><div id="335" class="line none">  335  * @param[out] param Pointer to buffer for decoded Publish Ack parameters.</div><div id="336" class="line none">  336  *</div><div id="337" class="line none">  337  * @return 0 if the procedure is successful, an error code otherwise.</div><div id="338" class="line none">  338  */</div><div id="339" class="line none">  339 int <a href="mqtt_decoder.c.html#272">publish_ack_decode</a>(struct <a href="mqtt_internal.h.html#128">buf_ctx</a> *<a href="../../../../include/zephyr/logging/log_msg.h.html#118">buf</a>, struct <a href="../../../../include/zephyr/net/mqtt.h.html#209">mqtt_puback_param</a> *<a href="../../../../include/zephyr/net/mqtt.h.html#322">param</a>);</div><div id="340" class="line none">  340 </div><div id="341" class="line none">  341 /**@brief Decode MQTT Publish Receive packet.</div><div id="342" class="line none">  342  *</div><div id="343" class="line none">  343  * @param[inout] buf A pointer to the buf_ctx structure containing current</div><div id="344" class="line none">  344  *                   buffer position.</div><div id="345" class="line none">  345  * @param[out] param Pointer to buffer for decoded Publish Receive parameters.</div><div id="346" class="line none">  346  *</div><div id="347" class="line none">  347  * @return 0 if the procedure is successful, an error code otherwise.</div><div id="348" class="line none">  348  */</div><div id="349" class="line none">  349 int <a href="mqtt_decoder.c.html#277">publish_receive_decode</a>(struct <a href="mqtt_internal.h.html#128">buf_ctx</a> *<a href="../../../../include/zephyr/logging/log_msg.h.html#118">buf</a>,</div><div id="350" class="line none">  350                            struct <a href="../../../../include/zephyr/net/mqtt.h.html#215">mqtt_pubrec_param</a> *<a href="../../../../include/zephyr/net/mqtt.h.html#322">param</a>);</div><div id="351" class="line none">  351 </div><div id="352" class="line none">  352 /**@brief Decode MQTT Publish Release packet.</div><div id="353" class="line none">  353  *</div><div id="354" class="line none">  354  * @param[inout] buf A pointer to the buf_ctx structure containing current</div><div id="355" class="line none">  355  *                   buffer position.</div><div id="356" class="line none">  356  * @param[out] param Pointer to buffer for decoded Publish Release parameters.</div><div id="357" class="line none">  357  *</div><div id="358" class="line none">  358  * @return 0 if the procedure is successful, an error code otherwise.</div><div id="359" class="line none">  359  */</div><div id="360" class="line none">  360 int <a href="mqtt_decoder.c.html#282">publish_release_decode</a>(struct <a href="mqtt_internal.h.html#128">buf_ctx</a> *<a href="../../../../include/zephyr/logging/log_msg.h.html#118">buf</a>,</div><div id="361" class="line none">  361                            struct <a href="../../../../include/zephyr/net/mqtt.h.html#221">mqtt_pubrel_param</a> *<a href="../../../../include/zephyr/net/mqtt.h.html#322">param</a>);</div><div id="362" class="line none">  362 </div><div id="363" class="line none">  363 /**@brief Decode MQTT Publish Complete packet.</div><div id="364" class="line none">  364  *</div><div id="365" class="line none">  365  * @param[inout] buf A pointer to the buf_ctx structure containing current</div><div id="366" class="line none">  366  *                   buffer position.</div><div id="367" class="line none">  367  * @param[out] param Pointer to buffer for decoded Publish Complete parameters.</div><div id="368" class="line none">  368  *</div><div id="369" class="line none">  369  * @return 0 if the procedure is successful, an error code otherwise.</div><div id="370" class="line none">  370  */</div><div id="371" class="line none">  371 int <a href="mqtt_decoder.c.html#287">publish_complete_decode</a>(struct <a href="mqtt_internal.h.html#128">buf_ctx</a> *<a href="../../../../include/zephyr/logging/log_msg.h.html#118">buf</a>,</div><div id="372" class="line none">  372                             struct <a href="../../../../include/zephyr/net/mqtt.h.html#227">mqtt_pubcomp_param</a> *<a href="../../../../include/zephyr/net/mqtt.h.html#322">param</a>);</div><div id="373" class="line none">  373 </div><div id="374" class="line none">  374 /**@brief Decode MQTT Subscribe packet.</div><div id="375" class="line none">  375  *</div><div id="376" class="line none">  376  * @param[inout] buf A pointer to the buf_ctx structure containing current</div><div id="377" class="line none">  377  *                   buffer position.</div><div id="378" class="line none">  378  * @param[out] param Pointer to buffer for decoded Subscribe parameters.</div><div id="379" class="line none">  379  *</div><div id="380" class="line none">  380  * @return 0 if the procedure is successful, an error code otherwise.</div><div id="381" class="line none">  381  */</div><div id="382" class="line none">  382 int <a href="mqtt_decoder.c.html#293">subscribe_ack_decode</a>(struct <a href="mqtt_internal.h.html#128">buf_ctx</a> *<a href="../../../../include/zephyr/logging/log_msg.h.html#118">buf</a>,</div><div id="383" class="line none">  383                          struct <a href="../../../../include/zephyr/net/mqtt.h.html#233">mqtt_suback_param</a> *<a href="../../../../include/zephyr/net/mqtt.h.html#322">param</a>);</div><div id="384" class="line none">  384 </div><div id="385" class="line none">  385 /**@brief Decode MQTT Unsubscribe packet.</div><div id="386" class="line none">  386  *</div><div id="387" class="line none">  387  * @param[inout] buf A pointer to the buf_ctx structure containing current</div><div id="388" class="line none">  388  *                   buffer position.</div><div id="389" class="line none">  389  * @param[out] param Pointer to buffer for decoded Unsubscribe parameters.</div><div id="390" class="line none">  390  *</div><div id="391" class="line none">  391  * @return 0 if the procedure is successful, an error code otherwise.</div><div id="392" class="line none">  392  */</div><div id="393" class="line none">  393 int <a href="mqtt_decoder.c.html#305">unsubscribe_ack_decode</a>(struct <a href="mqtt_internal.h.html#128">buf_ctx</a> *<a href="../../../../include/zephyr/logging/log_msg.h.html#118">buf</a>,</div><div id="394" class="line none">  394                            struct <a href="../../../../include/zephyr/net/mqtt.h.html#243">mqtt_unsuback_param</a> *<a href="../../../../include/zephyr/net/mqtt.h.html#322">param</a>);</div><div id="395" class="line none">  395 </div><div id="396" class="line none">  396 #ifdef __cplusplus</div><div id="397" class="line none">  397 }</div><div id="398" class="line none">  398 #endif</div><div id="399" class="line none">  399 </div><div id="400" class="line none">  400 #endif /* MQTT_INTERNAL_H_ */</div>
</div>
</body>
</html>
