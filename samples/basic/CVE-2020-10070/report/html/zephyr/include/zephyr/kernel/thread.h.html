
<html>
<head>
<title>zephyr/include/zephyr/kernel/thread.h</title>
<link rel="stylesheet" type="text/css" href="../../../../viewer.css">
</head>

<body>
<div class="code">
<div id="1" class="line none">    1 /*</div><div id="2" class="line none">    2  * Copyright (c) 2016, Wind River Systems, Inc.</div><div id="3" class="line none">    3  *</div><div id="4" class="line none">    4  * SPDX-License-Identifier: Apache-2.0</div><div id="5" class="line none">    5  */</div><div id="6" class="line none">    6 </div><div id="7" class="line none">    7 #ifndef <a href="thread.h.html#8">ZEPHYR_INCLUDE_KERNEL_THREAD_H_</a></div><div id="8" class="line none">    8 #define <a href="thread.h.html#8">ZEPHYR_INCLUDE_KERNEL_THREAD_H_</a></div><div id="9" class="line none">    9 </div><div id="10" class="line none">   10 #ifdef CONFIG_DEMAND_PAGING_THREAD_STATS</div><div id="11" class="line none">   11 #include &lt;zephyr/kernel/mm/demand_paging.h&gt;</div><div id="12" class="line none">   12 #endif /* CONFIG_DEMAND_PAGING_THREAD_STATS */</div><div id="13" class="line none">   13 </div><div id="14" class="line none">   14 #include &lt;zephyr/kernel/stats.h&gt;</div><div id="15" class="line none">   15 #include &lt;zephyr/<a href="thread.h.html#376">arch</a>/arch_interface.h&gt;</div><div id="16" class="line none">   16 </div><div id="17" class="line none">   17 /**</div><div id="18" class="line none">   18  * @typedef k_thread_entry_t</div><div id="19" class="line none">   19  * @brief Thread entry point function type.</div><div id="20" class="line none">   20  *</div><div id="21" class="line none">   21  * A thread's entry point function is invoked when the thread starts executing.</div><div id="22" class="line none">   22  * Up to 3 argument values can be passed to the function.</div><div id="23" class="line none">   23  *</div><div id="24" class="line none">   24  * The thread terminates execution permanently if the entry point function</div><div id="25" class="line none">   25  * returns. The thread is responsible for releasing any shared resources</div><div id="26" class="line none">   26  * it may own (such as mutexes and dynamically allocated memory), prior to</div><div id="27" class="line none">   27  * returning.</div><div id="28" class="line none">   28  *</div><div id="29" class="line none">   29  * @param p1 First argument.</div><div id="30" class="line none">   30  * @param p2 Second argument.</div><div id="31" class="line none">   31  * @param p3 Third argument.</div><div id="32" class="line none">   32  */</div><div id="33" class="line none">   33 </div><div id="34" class="line none">   34 #ifdef CONFIG_THREAD_MONITOR</div><div id="35" class="line none">   35 struct <a href="thread.h.html#35">__thread_entry</a> {</div><div id="36" class="line none">   36         <a href="../arch/arch_interface.h.html#48">k_thread_entry_t</a> <a href="thread.h.html#36">pEntry</a>;</div><div id="37" class="line none">   37         void *<a href="thread.h.html#37">parameter1</a>;</div><div id="38" class="line none">   38         void *<a href="thread.h.html#38">parameter2</a>;</div><div id="39" class="line none">   39         void *<a href="thread.h.html#39">parameter3</a>;</div><div id="40" class="line none">   40 };</div><div id="41" class="line none">   41 #endif /* CONFIG_THREAD_MONITOR */</div><div id="42" class="line none">   42 </div><div id="43" class="line none">   43 struct <a href="../arch/arch_interface.h.html#43">k_thread</a>;</div><div id="44" class="line none">   44 </div><div id="45" class="line none">   45 /*</div><div id="46" class="line none">   46  * This _pipe_desc structure is used by the pipes kernel module when</div><div id="47" class="line none">   47  * CONFIG_PIPES has been selected.</div><div id="48" class="line none">   48  */</div><div id="49" class="line none">   49 </div><div id="50" class="line none">   50 struct <a href="thread.h.html#50">_pipe_desc</a> {</div><div id="51" class="line none">   51         <a href="../sys/dlist.h.html#54">sys_dnode_t</a>      <a href="../kernel.h.html#3883">node</a>;</div><div id="52" class="line none">   52         unsigned char   *<a href="../kernel.h.html#4868">buffer</a>;         /* Position in src/dest buffer */</div><div id="53" class="line none">   53         size_t           <a href="thread.h.html#53">bytes_to_xfer</a>;  /* # bytes left to transfer */</div><div id="54" class="line none">   54         struct <a href="../arch/arch_interface.h.html#43">k_thread</a> *<a href="../kernel.h.html#4031">thread</a>;         /* Back pointer to pended thread */</div><div id="55" class="line none">   55 };</div><div id="56" class="line none">   56 </div><div id="57" class="line none">   57 /* can be used for creating 'dummy' threads, e.g. for pending on objects */</div><div id="58" class="line none">   58 struct <a href="thread.h.html#58">_thread_base</a> {</div><div id="59" class="line none">   59 </div><div id="60" class="line none">   60         /* this thread's entry in a ready/wait queue */</div><div id="61" class="line none">   61         union {</div><div id="62" class="line none">   62                 <a href="../sys/dlist.h.html#54">sys_dnode_t</a> <a href="thread.h.html#62">qnode_dlist</a>;</div><div id="63" class="line none">   63                 struct <a href="../sys/rb.h.html#58">rbnode</a> <a href="thread.h.html#63">qnode_rb</a>;</div><div id="64" class="line none">   64         };</div><div id="65" class="line none">   65 </div><div id="66" class="line none">   66         /* wait queue on which the thread is pended (needed only for</div><div id="67" class="line none">   67          * trees, not dumb lists)</div><div id="68" class="line none">   68          */</div><div id="69" class="line none">   69         <a href="../kernel_structs.h.html#286">_wait_q_t</a> *<a href="thread.h.html#69">pended_on</a>;</div><div id="70" class="line none">   70 </div><div id="71" class="line none">   71         /* user facing 'thread options'; values defined in include/kernel.h */</div><div id="72" class="line none">   72         uint8_t <a href="thread.h.html#72">user_options</a>;</div><div id="73" class="line none">   73 </div><div id="74" class="line none">   74         /* thread state */</div><div id="75" class="line none">   75         uint8_t <a href="thread.h.html#75">thread_state</a>;</div><div id="76" class="line none">   76 </div><div id="77" class="line none">   77         /*</div><div id="78" class="line none">   78          * scheduler lock count and thread priority</div><div id="79" class="line none">   79          *</div><div id="80" class="line none">   80          * These two fields control the preemptibility of a thread.</div><div id="81" class="line none">   81          *</div><div id="82" class="line none">   82          * When the scheduler is locked, sched_locked is decremented, which</div><div id="83" class="line none">   83          * means that the scheduler is locked for values from 0xff to 0x01. A</div><div id="84" class="line none">   84          * thread is coop if its prio is negative, thus 0x80 to 0xff when</div><div id="85" class="line none">   85          * looked at the value as unsigned.</div><div id="86" class="line none">   86          *</div><div id="87" class="line none">   87          * By putting them end-to-end, this means that a thread is</div><div id="88" class="line none">   88          * non-preemptible if the bundled value is greater than or equal to</div><div id="89" class="line none">   89          * 0x0080.</div><div id="90" class="line none">   90          */</div><div id="91" class="line none">   91         union {</div><div id="92" class="line none">   92                 struct {</div><div id="93" class="line none">   93 #ifdef CONFIG_BIG_ENDIAN</div><div id="94" class="line none">   94                         uint8_t <a href="thread.h.html#94">sched_locked</a>;</div><div id="95" class="line none">   95                         int8_t <a href="thread.h.html#95">prio</a>;</div><div id="96" class="line none">   96 #else /* Little Endian */</div><div id="97" class="line none">   97                         int8_t <a href="thread.h.html#95">prio</a>;</div><div id="98" class="line none">   98                         uint8_t <a href="thread.h.html#94">sched_locked</a>;</div><div id="99" class="line none">   99 #endif /* CONFIG_BIG_ENDIAN */</div><div id="100" class="line none">  100                 };</div><div id="101" class="line none">  101                 uint16_t <a href="thread.h.html#101">preempt</a>;</div><div id="102" class="line none">  102         };</div><div id="103" class="line none">  103 </div><div id="104" class="line none">  104 #ifdef CONFIG_SCHED_DEADLINE</div><div id="105" class="line none">  105         int <a href="thread.h.html#105">prio_deadline</a>;</div><div id="106" class="line none">  106 #endif /* CONFIG_SCHED_DEADLINE */</div><div id="107" class="line none">  107 </div><div id="108" class="line none">  108         uint32_t <a href="thread.h.html#108">order_key</a>;</div><div id="109" class="line none">  109 </div><div id="110" class="line none">  110 #ifdef CONFIG_SMP</div><div id="111" class="line none">  111         /* True for the per-CPU idle threads */</div><div id="112" class="line none">  112         uint8_t <a href="thread.h.html#112">is_idle</a>;</div><div id="113" class="line none">  113 </div><div id="114" class="line none">  114         /* CPU index on which thread was last run */</div><div id="115" class="line none">  115         uint8_t <a href="thread.h.html#115">cpu</a>;</div><div id="116" class="line none">  116 </div><div id="117" class="line none">  117         /* Recursive count of irq_lock() calls */</div><div id="118" class="line none">  118         uint8_t <a href="thread.h.html#118">global_lock_count</a>;</div><div id="119" class="line none">  119 </div><div id="120" class="line none">  120 #endif /* CONFIG_SMP */</div><div id="121" class="line none">  121 </div><div id="122" class="line none">  122 #ifdef CONFIG_SCHED_CPU_MASK</div><div id="123" class="line none">  123         /* "May run on" bits for each CPU */</div><div id="124" class="line none">  124 #if CONFIG_MP_MAX_NUM_CPUS &lt;= 8</div><div id="125" class="line none">  125         uint8_t <a href="thread.h.html#125">cpu_mask</a>;</div><div id="126" class="line none">  126 #else</div><div id="127" class="line none">  127         uint16_t <a href="thread.h.html#125">cpu_mask</a>;</div><div id="128" class="line none">  128 #endif /* CONFIG_MP_MAX_NUM_CPUS */</div><div id="129" class="line none">  129 #endif /* CONFIG_SCHED_CPU_MASK */</div><div id="130" class="line none">  130 </div><div id="131" class="line none">  131         /* data returned by APIs */</div><div id="132" class="line none">  132         void *<a href="thread.h.html#132">swap_data</a>;</div><div id="133" class="line none">  133 </div><div id="134" class="line none">  134 #ifdef CONFIG_SYS_CLOCK_EXISTS</div><div id="135" class="line none">  135         /* this thread's entry in a timeout queue */</div><div id="136" class="line none">  136         struct <a href="../kernel_structs.h.html#293">_timeout</a> <a href="../kernel.h.html#1452">timeout</a>;</div><div id="137" class="line none">  137 #endif /* CONFIG_SYS_CLOCK_EXISTS */</div><div id="138" class="line none">  138 </div><div id="139" class="line none">  139 #ifdef CONFIG_TIMESLICE_PER_THREAD</div><div id="140" class="line none">  140         int32_t <a href="thread.h.html#140">slice_ticks</a>;</div><div id="141" class="line none">  141         <a href="../kernel_structs.h.html#307">k_thread_timeslice_fn_t</a> <a href="thread.h.html#141">slice_expired</a>;</div><div id="142" class="line none">  142         void *<a href="thread.h.html#142">slice_data</a>;</div><div id="143" class="line none">  143 #endif /* CONFIG_TIMESLICE_PER_THREAD */</div><div id="144" class="line none">  144 </div><div id="145" class="line none">  145 #ifdef CONFIG_SCHED_THREAD_USAGE</div><div id="146" class="line none">  146         struct k_cycle_stats  <a href="thread.h.html#146">usage</a>;   /* Track thread usage statistics */</div><div id="147" class="line none">  147 #endif /* CONFIG_SCHED_THREAD_USAGE */</div><div id="148" class="line none">  148 };</div><div id="149" class="line none">  149 </div><div id="150" class="line none">  150 typedef struct <a href="thread.h.html#58">_thread_base</a> <a href="thread.h.html#150">_thread_base_t</a>;</div><div id="151" class="line none">  151 </div><div id="152" class="line none">  152 #if defined(CONFIG_THREAD_STACK_INFO)</div><div id="153" class="line none">  153 /* Contains the stack information of a thread */</div><div id="154" class="line none">  154 struct <a href="thread.h.html#154">_thread_stack_info</a> {</div><div id="155" class="line none">  155         /* Stack start - Represents the start address of the thread-writable</div><div id="156" class="line none">  156          * stack area.</div><div id="157" class="line none">  157          */</div><div id="158" class="line none">  158         uintptr_t <a href="thread.h.html#158">start</a>;</div><div id="159" class="line none">  159 </div><div id="160" class="line none">  160         /* Thread writable stack buffer size. Represents the size of the actual</div><div id="161" class="line none">  161          * buffer, starting from the 'start' member, that should be writable by</div><div id="162" class="line none">  162          * the thread. This comprises of the thread stack area, any area reserved</div><div id="163" class="line none">  163          * for local thread data storage, as well as any area left-out due to</div><div id="164" class="line none">  164          * random adjustments applied to the initial thread stack pointer during</div><div id="165" class="line none">  165          * thread initialization.</div><div id="166" class="line none">  166          */</div><div id="167" class="line none">  167         size_t <a href="../kernel.h.html#4716">size</a>;</div><div id="168" class="line none">  168 </div><div id="169" class="line none">  169         /* Adjustment value to the size member, removing any storage</div><div id="170" class="line none">  170          * used for TLS or random stack base offsets. (start + size - delta)</div><div id="171" class="line none">  171          * is the initial stack pointer for a thread. May be 0.</div><div id="172" class="line none">  172          */</div><div id="173" class="line none">  173         size_t <a href="thread.h.html#173">delta</a>;</div><div id="174" class="line none">  174 </div><div id="175" class="line none">  175 #if defined(CONFIG_THREAD_STACK_MEM_MAPPED)</div><div id="176" class="line none">  176         struct {</div><div id="177" class="line none">  177                 /** Base address of the memory mapped thread stack */</div><div id="178" class="line none">  178                 <a href="../arch/arch_interface.h.html#46">k_thread_stack_t</a> *<a href="thread.h.html#178">addr</a>;</div><div id="179" class="line none">  179 </div><div id="180" class="line none">  180                 /** Size of whole mapped stack object */</div><div id="181" class="line none">  181                 size_t <a href="thread.h.html#181">sz</a>;</div><div id="182" class="line none">  182         } <a href="thread.h.html#182">mapped</a>;</div><div id="183" class="line none">  183 #endif /* CONFIG_THREAD_STACK_MEM_MAPPED */</div><div id="184" class="line none">  184 };</div><div id="185" class="line none">  185 </div><div id="186" class="line none">  186 typedef struct <a href="thread.h.html#154">_thread_stack_info</a> <a href="thread.h.html#186">_thread_stack_info_t</a>;</div><div id="187" class="line none">  187 #endif /* CONFIG_THREAD_STACK_INFO */</div><div id="188" class="line none">  188 </div><div id="189" class="line none">  189 #if defined(CONFIG_USERSPACE)</div><div id="190" class="line none">  190 struct <a href="thread.h.html#190">_mem_domain_info</a> {</div><div id="191" class="line none">  191         /** memory domain queue node */</div><div id="192" class="line none">  192         <a href="../sys/dlist.h.html#54">sys_dnode_t</a> <a href="thread.h.html#192">mem_domain_q_node</a>;</div><div id="193" class="line none">  193         /** memory domain of the thread */</div><div id="194" class="line none">  194         struct k_mem_domain *<a href="thread.h.html#194">mem_domain</a>;</div><div id="195" class="line none">  195 };</div><div id="196" class="line none">  196 </div><div id="197" class="line none">  197 #endif /* CONFIG_USERSPACE */</div><div id="198" class="line none">  198 </div><div id="199" class="line none">  199 #ifdef CONFIG_THREAD_USERSPACE_LOCAL_DATA</div><div id="200" class="line none">  200 struct <a href="thread.h.html#200">_thread_userspace_local_data</a> {</div><div id="201" class="line none">  201 #if defined(CONFIG_ERRNO) &amp;&amp; !defined(CONFIG_ERRNO_IN_TLS) &amp;&amp; !defined(CONFIG_LIBC_ERRNO)</div><div id="202" class="line none">  202         int <a href="thread.h.html#202">errno_var</a>;</div><div id="203" class="line none">  203 #endif /* CONFIG_ERRNO &amp;&amp; !CONFIG_ERRNO_IN_TLS &amp;&amp; !CONFIG_LIBC_ERRNO */</div><div id="204" class="line none">  204 };</div><div id="205" class="line none">  205 #endif /* CONFIG_THREAD_USERSPACE_LOCAL_DATA */</div><div id="206" class="line none">  206 </div><div id="207" class="line none">  207 typedef struct <a href="thread.h.html#207">k_thread_runtime_stats</a> {</div><div id="208" class="line none">  208 #ifdef CONFIG_SCHED_THREAD_USAGE</div><div id="209" class="line none">  209         /*</div><div id="210" class="line none">  210          * For CPU stats, execution_cycles is the sum of non-idle + idle cycles.</div><div id="211" class="line none">  211          * For thread stats, execution_cycles = total_cycles.</div><div id="212" class="line none">  212          */</div><div id="213" class="line none">  213         uint64_t <a href="thread.h.html#213">execution_cycles</a>;    /* total # of cycles (cpu: non-idle + idle) */</div><div id="214" class="line none">  214         uint64_t <a href="thread.h.html#214">total_cycles</a>;        /* total # of non-idle cycles */</div><div id="215" class="line none">  215 #endif /* CONFIG_SCHED_THREAD_USAGE */</div><div id="216" class="line none">  216 </div><div id="217" class="line none">  217 #ifdef CONFIG_SCHED_THREAD_USAGE_ANALYSIS</div><div id="218" class="line none">  218         /*</div><div id="219" class="line none">  219          * For threads, the following fields refer to the time spent executing</div><div id="220" class="line none">  220          * as bounded by when the thread was scheduled in and scheduled out.</div><div id="221" class="line none">  221          * For CPUs, the same fields refer to the time spent executing</div><div id="222" class="line none">  222          * non-idle threads as bounded by the idle thread(s).</div><div id="223" class="line none">  223          */</div><div id="224" class="line none">  224 </div><div id="225" class="line none">  225         uint64_t <a href="thread.h.html#225">current_cycles</a>;      /* current # of non-idle cycles */</div><div id="226" class="line none">  226         uint64_t <a href="thread.h.html#226">peak_cycles</a>;         /* peak # of non-idle cycles */</div><div id="227" class="line none">  227         uint64_t <a href="thread.h.html#227">average_cycles</a>;      /* average # of non-idle cycles */</div><div id="228" class="line none">  228 #endif /* CONFIG_SCHED_THREAD_USAGE_ANALYSIS */</div><div id="229" class="line none">  229 </div><div id="230" class="line none">  230 #ifdef CONFIG_SCHED_THREAD_USAGE_ALL</div><div id="231" class="line none">  231         /*</div><div id="232" class="line none">  232          * This field is always zero for individual threads. It only comes</div><div id="233" class="line none">  233          * into play when gathering statistics for the CPU. In that case it</div><div id="234" class="line none">  234          * represents the total number of cycles spent idling.</div><div id="235" class="line none">  235          */</div><div id="236" class="line none">  236 </div><div id="237" class="line none">  237         uint64_t <a href="thread.h.html#237">idle_cycles</a>;</div><div id="238" class="line none">  238 #endif /* CONFIG_SCHED_THREAD_USAGE_ALL */</div><div id="239" class="line none">  239 </div><div id="240" class="line none">  240 #if defined(__cplusplus) &amp;&amp; !defined(CONFIG_SCHED_THREAD_USAGE) &amp;&amp;                                 \</div><div id="241" class="line none">  241         !defined(CONFIG_SCHED_THREAD_USAGE_ANALYSIS) &amp;&amp; !defined(CONFIG_SCHED_THREAD_USAGE_ALL)</div><div id="242" class="line none">  242         /* If none of the above Kconfig values are defined, this struct will have a size 0 in C</div><div id="243" class="line none">  243          * which is not allowed in C++ (it'll have a size 1). To prevent this, we add a 1 byte dummy</div><div id="244" class="line none">  244          * variable when the struct would otherwise be empty.</div><div id="245" class="line none">  245          */</div><div id="246" class="line none">  246         uint8_t <a href="thread.h.html#246">dummy</a>;</div><div id="247" class="line none">  247 #endif</div><div id="248" class="line none">  248 }  <a href="thread.h.html#248">k_thread_runtime_stats_t</a>;</div><div id="249" class="line none">  249 </div><div id="250" class="line none">  250 struct <a href="thread.h.html#250">z_poller</a> {</div><div id="251" class="line none">  251         bool <a href="thread.h.html#251">is_polling</a>;</div><div id="252" class="line none">  252         uint8_t <a href="../arch/arm/thread.h.html#118">mode</a>;</div><div id="253" class="line none">  253 };</div><div id="254" class="line none">  254 </div><div id="255" class="line none">  255 /**</div><div id="256" class="line none">  256  * @ingroup thread_apis</div><div id="257" class="line none">  257  * Thread Structure</div><div id="258" class="line none">  258  */</div><div id="259" class="line none">  259 struct <a href="../arch/arch_interface.h.html#43">k_thread</a> {</div><div id="260" class="line none">  260 </div><div id="261" class="line none">  261         struct <a href="thread.h.html#58">_thread_base</a> <a href="../kernel.h.html#2762">base</a>;</div><div id="262" class="line none">  262 </div><div id="263" class="line none">  263         /** defined by the architecture, but all archs need these */</div><div id="264" class="line none">  264         struct <a href="../arch/arm/thread.h.html#25">_callee_saved</a> <a href="thread.h.html#264">callee_saved</a>;</div><div id="265" class="line none">  265 </div><div id="266" class="line none">  266         /** static thread init data */</div><div id="267" class="line none">  267         void *<a href="thread.h.html#267">init_data</a>;</div><div id="268" class="line none">  268 </div><div id="269" class="line none">  269         /** threads waiting in k_thread_join() */</div><div id="270" class="line none">  270         <a href="../kernel_structs.h.html#286">_wait_q_t</a> <a href="thread.h.html#270">join_queue</a>;</div><div id="271" class="line none">  271 </div><div id="272" class="line none">  272 #if defined(CONFIG_POLL)</div><div id="273" class="line none">  273         struct <a href="thread.h.html#250">z_poller</a> <a href="../kernel.h.html#4277">poller</a>;</div><div id="274" class="line none">  274 #endif /* CONFIG_POLL */</div><div id="275" class="line none">  275 </div><div id="276" class="line none">  276 #if defined(CONFIG_EVENTS)</div><div id="277" class="line none">  277         struct <a href="../arch/arch_interface.h.html#43">k_thread</a> *<a href="thread.h.html#277">next_event_link</a>;</div><div id="278" class="line none">  278 </div><div id="279" class="line none">  279         uint32_t   <a href="../kernel.h.html#2223">events</a>;</div><div id="280" class="line none">  280         uint32_t   <a href="thread.h.html#280">event_options</a>;</div><div id="281" class="line none">  281 </div><div id="282" class="line none">  282         /** true if timeout should not wake the thread */</div><div id="283" class="line none">  283         bool <a href="thread.h.html#283">no_wake_on_timeout</a>;</div><div id="284" class="line none">  284 #endif /* CONFIG_EVENTS */</div><div id="285" class="line none">  285 </div><div id="286" class="line none">  286 #if defined(CONFIG_THREAD_MONITOR)</div><div id="287" class="line none">  287         /** thread entry and parameters description */</div><div id="288" class="line none">  288         struct <a href="thread.h.html#35">__thread_entry</a> <a href="thread.h.html#288">entry</a>;</div><div id="289" class="line none">  289 </div><div id="290" class="line none">  290         /** next item in list of all threads */</div><div id="291" class="line none">  291         struct <a href="../arch/arch_interface.h.html#43">k_thread</a> *<a href="thread.h.html#291">next_thread</a>;</div><div id="292" class="line none">  292 #endif /* CONFIG_THREAD_MONITOR */</div><div id="293" class="line none">  293 </div><div id="294" class="line none">  294 #if defined(CONFIG_THREAD_NAME)</div><div id="295" class="line none">  295         /** Thread name */</div><div id="296" class="line none">  296         char <a href="../kernel.h.html#4006">name</a>[CONFIG_THREAD_MAX_NAME_LEN];</div><div id="297" class="line none">  297 #endif /* CONFIG_THREAD_NAME */</div><div id="298" class="line none">  298 </div><div id="299" class="line none">  299 #ifdef CONFIG_THREAD_CUSTOM_DATA</div><div id="300" class="line none">  300         /** crude thread-local storage */</div><div id="301" class="line none">  301         void *<a href="thread.h.html#301">custom_data</a>;</div><div id="302" class="line none">  302 #endif /* CONFIG_THREAD_CUSTOM_DATA */</div><div id="303" class="line none">  303 </div><div id="304" class="line none">  304 #ifdef CONFIG_THREAD_USERSPACE_LOCAL_DATA</div><div id="305" class="line none">  305         struct <a href="thread.h.html#200">_thread_userspace_local_data</a> *<a href="thread.h.html#305">userspace_local_data</a>;</div><div id="306" class="line none">  306 #endif /* CONFIG_THREAD_USERSPACE_LOCAL_DATA */</div><div id="307" class="line none">  307 </div><div id="308" class="line none">  308 #if defined(CONFIG_ERRNO) &amp;&amp; !defined(CONFIG_ERRNO_IN_TLS) &amp;&amp; !defined(CONFIG_LIBC_ERRNO)</div><div id="309" class="line none">  309 #ifndef CONFIG_USERSPACE</div><div id="310" class="line none">  310         /** per-thread errno variable */</div><div id="311" class="line none">  311         int <a href="thread.h.html#202">errno_var</a>;</div><div id="312" class="line none">  312 #endif /* CONFIG_USERSPACE */</div><div id="313" class="line none">  313 #endif /* CONFIG_ERRNO &amp;&amp; !CONFIG_ERRNO_IN_TLS &amp;&amp; !CONFIG_LIBC_ERRNO */</div><div id="314" class="line none">  314 </div><div id="315" class="line none">  315 #if defined(CONFIG_THREAD_STACK_INFO)</div><div id="316" class="line none">  316         /** Stack Info */</div><div id="317" class="line none">  317         struct <a href="thread.h.html#154">_thread_stack_info</a> <a href="thread.h.html#317">stack_info</a>;</div><div id="318" class="line none">  318 #endif /* CONFIG_THREAD_STACK_INFO */</div><div id="319" class="line none">  319 </div><div id="320" class="line none">  320 #if defined(CONFIG_USERSPACE)</div><div id="321" class="line none">  321         /** memory domain info of the thread */</div><div id="322" class="line none">  322         struct <a href="thread.h.html#190">_mem_domain_info</a> <a href="thread.h.html#322">mem_domain_info</a>;</div><div id="323" class="line none">  323 </div><div id="324" class="line none">  324         /**</div><div id="325" class="line none">  325          * Base address of thread stack.</div><div id="326" class="line none">  326          *</div><div id="327" class="line none">  327          * If memory mapped stack (CONFIG_THREAD_STACK_MEM_MAPPED)</div><div id="328" class="line none">  328          * is enabled, this is the physical address of the stack.</div><div id="329" class="line none">  329          */</div><div id="330" class="line none">  330         <a href="../arch/arch_interface.h.html#46">k_thread_stack_t</a> *<a href="thread.h.html#330">stack_obj</a>;</div><div id="331" class="line none">  331 </div><div id="332" class="line none">  332         /** current syscall frame pointer */</div><div id="333" class="line none">  333         void *<a href="thread.h.html#333">syscall_frame</a>;</div><div id="334" class="line none">  334 #endif /* CONFIG_USERSPACE */</div><div id="335" class="line none">  335 </div><div id="336" class="line none">  336 </div><div id="337" class="line none">  337 #if defined(CONFIG_USE_SWITCH)</div><div id="338" class="line none">  338         /* When using __switch() a few previously arch-specific items</div><div id="339" class="line none">  339          * become part of the core OS</div><div id="340" class="line none">  340          */</div><div id="341" class="line none">  341 </div><div id="342" class="line none">  342         /** z_swap() return value */</div><div id="343" class="line none">  343         int <a href="thread.h.html#343">swap_retval</a>;</div><div id="344" class="line none">  344 </div><div id="345" class="line none">  345         /** Context handle returned via arch_switch() */</div><div id="346" class="line none">  346         void *<a href="thread.h.html#346">switch_handle</a>;</div><div id="347" class="line none">  347 #endif /* CONFIG_USE_SWITCH */</div><div id="348" class="line none">  348         /** resource pool */</div><div id="349" class="line none">  349         struct <a href="thread.h.html#349">k_heap</a> *<a href="thread.h.html#349">resource_pool</a>;</div><div id="350" class="line none">  350 </div><div id="351" class="line none">  351 #if defined(CONFIG_THREAD_LOCAL_STORAGE)</div><div id="352" class="line none">  352         /* Pointer to arch-specific TLS area */</div><div id="353" class="line none">  353         uintptr_t <a href="thread.h.html#353">tls</a>;</div><div id="354" class="line none">  354 #endif /* CONFIG_THREAD_LOCAL_STORAGE */</div><div id="355" class="line none">  355 </div><div id="356" class="line none">  356 #ifdef CONFIG_DEMAND_PAGING_THREAD_STATS</div><div id="357" class="line none">  357         /** Paging statistics */</div><div id="358" class="line none">  358         struct k_mem_paging_stats_t <a href="thread.h.html#358">paging_stats</a>;</div><div id="359" class="line none">  359 #endif /* CONFIG_DEMAND_PAGING_THREAD_STATS */</div><div id="360" class="line none">  360 </div><div id="361" class="line none">  361 #ifdef CONFIG_PIPES</div><div id="362" class="line none">  362         /** Pipe descriptor used with blocking k_pipe operations */</div><div id="363" class="line none">  363         struct <a href="thread.h.html#50">_pipe_desc</a> <a href="thread.h.html#363">pipe_desc</a>;</div><div id="364" class="line none">  364 #endif /* CONFIG_PIPES */</div><div id="365" class="line none">  365 </div><div id="366" class="line none">  366 #ifdef CONFIG_OBJ_CORE_THREAD</div><div id="367" class="line none">  367         struct k_obj_core  <a href="../kernel.h.html#1475">obj_core</a>;</div><div id="368" class="line none">  368 #endif /* CONFIG_OBJ_CORE_THREAD */</div><div id="369" class="line none">  369 </div><div id="370" class="line none">  370 #ifdef CONFIG_SMP</div><div id="371" class="line none">  371         /** threads waiting in k_thread_suspend() */</div><div id="372" class="line none">  372         <a href="../kernel_structs.h.html#286">_wait_q_t</a>  <a href="thread.h.html#372">halt_queue</a>;</div><div id="373" class="line none">  373 #endif /* CONFIG_SMP */</div><div id="374" class="line none">  374 </div><div id="375" class="line none">  375         /** arch-specifics: must always be at the end */</div><div id="376" class="line none">  376         struct <a href="../arch/arm/thread.h.html#63">_thread_arch</a> <a href="thread.h.html#376">arch</a>;</div><div id="377" class="line none">  377 };</div><div id="378" class="line none">  378 </div><div id="379" class="line none">  379 typedef struct <a href="../arch/arch_interface.h.html#43">k_thread</a> <a href="thread.h.html#379">_thread_t</a>;</div><div id="380" class="line none">  380 typedef struct <a href="../arch/arch_interface.h.html#43">k_thread</a> *<a href="thread.h.html#380">k_tid_t</a>;</div><div id="381" class="line none">  381 </div><div id="382" class="line none">  382 #endif /* ZEPHYR_INCLUDE_KERNEL_THREAD_H_ */</div>
</div>
</body>
</html>
