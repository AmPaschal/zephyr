#include "mqtt/mqtt_internal.h"
#include "zephyr/net/mqtt.h"

#include <stdlib.h>

int mqtt_transport_read(struct mqtt_client *client, uint8_t *data, uint32_t buflen,
			bool shall_block)
{

	// Put some values into the buffer:

	memset(data, 0, buflen);

	// Read data from the client:

	int val;

	return val;
}

int harness() {

	// Model input variables:

	struct mqtt_client client;
	uint32_t length;
	struct buf_ctx bctx;

	// Allocate client buffer:

	uint16_t csize;

	__CPROVER_assume(csize <= 100);

	client.rx_buf = malloc(csize);
	client.rx_buf_size = csize;

	// Find values for the ctx buffer:

	bctx.cur = client.rx_buf;

	// Determine offsets:

	uint16_t datalen;

	__CPROVER_assume(datalen < csize);

	bctx.end = client.rx_buf + datalen;

	int res = mqtt_read_message_chunk(&client, &bctx, length);
}

int main() {

	harness();
	return 0;
}
